(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[8816],{52710:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});const s={components:{},data:function(){return{reportForm:new Form({batch_id:"",student_id:"",exam_term_id:"",exam_id:"",type:""},!1),exams:[],types:[],exam_terms:[],batches:[],selected_batch:null,students:[],selected_student:null,disable_filter:!1}},mounted:function(){helper.hasPermission("access-exam-report")||helper.hasPermission("access-class-teacher-wise-exam-report")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.getPreRequisite()},methods:{hasPermission:function(t){return helper.hasPermission(t)},getPreRequisite:function(){var t=this,e=this.$loading.show();axios.get("/api/exam/report/pre-requisite").then((function(r){t.batches=r.batches,t.types=r.types,t.exam_terms=r.exam_terms,t.exams=r.exams,t.reportForm.type=t.types[0].value,e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},getStudents:function(){var t=this,e=this.$loading.show();this.students=[],this.selected_student=null,axios.post("/api/exam/report/student",{batch_id:this.reportForm.batch_id}).then((function(r){t.students=r.students,e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},resetFilter:function(){this.disable_filter=!1},getReport:function(){var t=this.$loading.show();axios.post("/api/exam/report",{batch_id:this.reportForm.batch_id,student_record_id:this.reportForm.student_id,type:this.reportForm.type,exam_term_id:"term_wise"==this.reportForm.type?this.reportForm.exam_term_id:"",exam_id:"exam_wise"==this.reportForm.type?this.reportForm.exam_id:""}).then((function(e){var r=window.open("/print");t.hide(),r.document.write(e)})).catch((function(e){t.hide(),helper.showErrorMsg(e)}))},getPDFReport:function(){var t=this,e=this.$loading.show();axios.post("/api/exam/report/pdf",{batch_id:this.reportForm.batch_id,student_record_id:this.reportForm.student_id,type:this.reportForm.type,exam_term_id:"term_wise"==this.reportForm.type?this.reportForm.exam_term_id:"",exam_id:"exam_wise"==this.reportForm.type?this.reportForm.exam_id:""}).then((function(r){e.hide(),window.open("/download/report/"+r+"?token="+t.authToken)})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))},onBatchSelect:function(t){this.reportForm.batch_id=t.id,this.getStudents()},onStudentSelect:function(t){this.reportForm.student_id=t.id}},watch:{},computed:{authToken:function(){return helper.getAuthToken()}}};const o=(0,r(51900).Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"page-titles"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-6"},[r("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("exam.report")))])]),t._v(" "),t._m(0)])]),t._v(" "),r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"card card-form"},[r("div",{staticClass:"card-body p-t-20"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)},keydown:function(e){return t.reportForm.errors.clear(e.target.name)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-3"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("academic.batch"))+" ")]),t._v(" "),r("v-select",{attrs:{label:"name",disabled:t.disable_filter,"group-values":"batches","group-label":"course_group","group-select":!1,name:"batch_id",id:"batch_id",options:t.batches,placeholder:t.trans("academic.select_batch")},on:{select:t.onBatchSelect,close:function(e){return t.reportForm.errors.clear("batch_id")},remove:function(e){t.reportForm.batch_id=""}},model:{value:t.selected_batch,callback:function(e){t.selected_batch=e},expression:"selected_batch"}},[t.batches.length?t._e():r("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n\t\t\t                                "+t._s(t.trans("general.no_option_found"))+"\n\t\t\t                            ")])]),t._v(" "),r("show-error",{attrs:{"form-name":t.reportForm,"prop-name":"batch_id"}})],1)]),t._v(" "),r("div",{staticClass:"col-12 col-sm-3"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("student.student"))+" ")]),t._v(" "),r("v-select",{attrs:{label:"name",disabled:t.disable_filter,name:"student_id",id:"student_id",options:t.students,placeholder:t.trans("student.select_student")},on:{select:t.onStudentSelect,close:function(e){return t.reportForm.errors.clear("student_id")},remove:function(e){t.reportForm.student_id=""}},model:{value:t.selected_student,callback:function(e){t.selected_student=e},expression:"selected_student"}},[t.students.length?t._e():r("div",{staticClass:"multiselect__option",attrs:{slot:"afterList"},slot:"afterList"},[t._v("\n\t\t\t                                "+t._s(t.trans("general.no_option_found"))+"\n\t\t\t                            ")])]),t._v(" "),r("show-error",{attrs:{"form-name":t.reportForm,"prop-name":"student_id"}})],1)]),t._v(" "),t.types.length>1?r("div",{staticClass:"col-12 col-sm-3"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("exam.term_report_type")))]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.reportForm.type,expression:"reportForm.type"}],staticClass:"custom-select col-12",attrs:{name:"type"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.reportForm,"type",e.target.multiple?r:r[0])},function(e){return t.reportForm.errors.clear("type")}]}},t._l(t.types,(function(e){return r("option",{domProps:{value:e.value}},[t._v("\n                                        "+t._s(e.text)+"\n                                      ")])})),0),t._v(" "),r("show-error",{attrs:{"form-name":t.reportForm,"prop-name":"type"}})],1)]):t._e(),t._v(" "),t.types.length>1&&"term_wise"==t.reportForm.type?r("div",{staticClass:"col-12 col-sm-3"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("exam.term")))]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.reportForm.exam_term_id,expression:"reportForm.exam_term_id"}],staticClass:"custom-select col-12",attrs:{name:"exam_term_id"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.reportForm,"exam_term_id",e.target.multiple?r:r[0])},function(e){return t.reportForm.errors.clear("exam_term_id")}]}},[r("option",{attrs:{value:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.exam_terms,(function(e){return r("option",{domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.name)+"\n                                      ")])}))],2),t._v(" "),r("show-error",{attrs:{"form-name":t.reportForm,"prop-name":"exam_term_id"}})],1)]):t._e(),t._v(" "),t.types.length>1&&"exam_wise"==t.reportForm.type?r("div",{staticClass:"col-12 col-sm-3"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("exam.term")))]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.reportForm.exam_id,expression:"reportForm.exam_id"}],staticClass:"custom-select col-12",attrs:{name:"exam_id"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.reportForm,"exam_id",e.target.multiple?r:r[0])},function(e){return t.reportForm.errors.clear("exam_id")}]}},[r("option",{attrs:{value:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.exams,(function(e){return r("option",{domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.name)+"\n                                      ")])}))],2),t._v(" "),r("show-error",{attrs:{"form-name":t.reportForm,"prop-name":"exam_id"}})],1)]):t._e()]),t._v(" "),r("div",{staticClass:"card-footer text-right"},[r("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"button"},on:{click:t.getReport}},[t._v(t._s(t.trans("general.print")))]),t._v(" "),r("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"button"},on:{click:t.getPDFReport}},[t._v(t._s(t.trans("general.generate_pdf")))])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 col-sm-6"},[e("div",{staticClass:"action-buttons pull-right"})])}],!1,null,null,null).exports}}]);
//# sourceMappingURL=index.js.map?id=2354f97ecb6e8f5cfe7b
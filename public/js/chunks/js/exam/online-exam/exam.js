(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[8627],{10269:(t,e,s)=>{"use strict";s.r(e),s.d(e,{default:()=>l});function n(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,n)}return s}function i(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?n(Object(s),!0).forEach((function(e){a(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}function a(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}const r={data:function(){return{uuid:this.$route.params.uuid,online_exam:{batch:{course:{}},subject:{}},is_final_submitted:!1,online_exam_record:{},onlineExamForm:new Form({answers:[]},!1),exam_started:!1,questions:[],countdown:0}},mounted:function(){this.getOnlineExam(),this.hasRole("student")&&"upcoming"==this.online_exam.status&&this.$router.push("/online-exam"),this.hasRole("parent")&&"expired"!=this.online_exam.status&&this.$router.push("/online-exam")},methods:{hasRole:function(t){return helper.hasRole(t)},getOnlineExam:function(){var t=this,e=this.$loading.show();this.onlineExamForm.answers=[],axios.get("/api/online-exam/"+this.uuid+"/exam").then((function(s){t.online_exam=s.online_exam,t.questions=s.questions,t.countdown=s.countdown,t.online_exam_record=s.online_exam_record,t.is_final_submitted=s.is_final_submitted,t.questions.forEach((function(e){var s="";if(t.online_exam_record){var n=t.online_exam_record.answers.find((function(t){return t.question_id==e.id}));void 0!==o(n)&&(s=n.answer)}t.onlineExamForm.answers.push(i(i({},e),{},{answer:s}))})),t.exam_started=!!s.online_exam_record,e.hide()})).catch((function(s){helper.showErrorMsg(Error),e.hide(),t.$router.push("/online-exam")}))},getAnswerName:function(t){return"answer_"+t},submit:function(){var t=this.$loading.show();this.onlineExamForm.post("/api/online-exam/"+this.uuid+"/exam").then((function(e){toastr.success(e.message),t.hide()})).catch((function(e){helper.showErrorMsg(e),t.hide()}))},finalSubmit:function(){var t=this,e=this.$loading.show();this.onlineExamForm.post("/api/online-exam/"+this.uuid+"/exam?is_final=1").then((function(s){toastr.success(s.message),e.hide(),t.getOnlineExam()})).catch((function(t){helper.showErrorMsg(t),e.hide()}))},startExam:function(){var t=this,e=this.$loading.show();this.onlineExamForm.post("/api/online-exam/"+this.uuid+"/exam").then((function(s){t.getOnlineExam(),e.hide()})).catch((function(t){helper.showErrorMsg(t),e.hide()}))}},filters:{moment:function(t){return helper.formatDate(t)},momentTime:function(t){return helper.formatTime(t)},momentDateTime:function(t){return helper.formatDateTime(t)}}};const l=(0,s(51900).Z)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"page-titles"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-6"},[s("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("exam.online_exam"))+"\n                        "),t.online_exam?s("span",{staticClass:"card-subtitle d-none d-sm-inline"},[t._v(t._s(t.online_exam.name)+" ("+t._s(t.trans("exam.online_exam_type_"+t.online_exam.exam_type))+")")]):t._e()])]),t._v(" "),s("div",{staticClass:"col-12 col-sm-6"},[s("div",{staticClass:"action-buttons pull-right"},[s("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/online-exam"}},[s("i",{staticClass:"fas fa-list"}),t._v(" "),s("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("exam.online_exam")))])])],1)])])]),t._v(" "),s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("div",{staticClass:"card"},[t.online_exam?s("div",{staticClass:"card-boy"},[s("h4",{staticClass:"card-title m-3 text-center"},[t._v("\n\t\t\t                    "+t._s(t.online_exam.batch.course.name+" "+t.online_exam.batch.name)+"\n\t\t\t                    "+t._s(t.online_exam.subject.name+" ("+t.online_exam.subject.code+")")+"\n\t\t\t                ")]),t._v(" "),s("h4",{staticClass:"card-title m-3 text-center"},[s("small",[t._v(t._s(t._f("moment")(t.online_exam.date))+" "+t._s(t._f("momentTime")(t.online_exam.start_time))+" "+t._s(t.trans("general.to"))+" "+t._s(t._f("momentTime")(t.online_exam.end_time))+" ")]),t._v(" "),s("br")]),t._v(" "),s("div",{staticClass:"border-top"},[s("h4",{staticClass:"card-title m-3 text-center"},[s("small",[t._v(t._s(t.trans("exam.online_exam_instructions")))])]),t._v(" "),s("div",{staticClass:"p-4",staticStyle:{"font-size":"90%"},domProps:{innerHTML:t._s(t.online_exam.instructions)}})]),t._v(" "),s("hr"),t._v(" "),t.exam_started?s("div",[s("h4",{staticClass:"card-title m-3"},[t._v(t._s(t.trans("exam.online_exam_questions"))+"\n\t\t\t\t                    "),t.is_final_submitted?t._e():s("span",{staticClass:"pull-right m-r-5"},[s("countdown",{attrs:{time:t.countdown,interval:100,tag:"p"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.hours)+" "+t._s(t.trans("list.hour"))+", "+t._s(e.minutes)+" "+t._s(t.trans("list.minute"))+", "+t._s(e.seconds)+"."+t._s(Math.floor(e.milliseconds/100))+" "+t._s(t.trans("list.second")))]}}],null,!1,555607460)})],1)]),t._v(" "),s("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)},keydown:function(e){return t.onlineExamForm.errors.clear(e.target.name)}}},[s("div",{staticClass:"p-4"},t._l(t.onlineExamForm.answers,(function(e,n){return s("div",{staticClass:"border-bottom my-2",staticStyle:{"font-size":"90%",padding:"10px","background-color":"rgb(241, 243, 244)","border-radius":"5px",color:"#000"}},[s("p",[t._v("\n\t\t\t\t\t                            ("+t._s(n+1)+") "+t._s(e.question)+" \n\t\t\t\t\t                            "),s("span",{staticClass:"pull-right"},[t._v("("+t._s(e.mark)+")")])]),t._v(" "),e.image?s("div",{staticStyle:{padding:"10px"}},[s("center",[s("img",{staticStyle:{"max-width":"250px"},attrs:{src:"/"+e.image}})])],1):t._e(),t._v(" "),"mcq"==e.question_type?s("div",{staticClass:"row",staticStyle:{"padding-left":"20px"}},t._l(e.answers,(function(i,a){return s("div",{staticClass:"col-6"},[s("div",{staticClass:"radio radio-info"},[s("div",{staticClass:"form-check form-check-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"question.answer"}],staticClass:"form-check-input",attrs:{disabled:!!t.is_final_submitted,type:"radio",id:e.id+"_option_"+i.title,name:t.getAnswerName(n)},domProps:{value:i.title,checked:e.answer==i.title,checked:t._q(e.answer,i.title)},on:{click:function(t){},change:function(s){return t.$set(e,"answer",i.title)}}}),t._v(" "),s("label",{staticClass:"form-check-label",attrs:{for:e.id+"_option_"+i.title}},[t._v(" ("+t._s(a+1)+") "+t._s(i.title))]),t._v(" "),"expired"==t.online_exam.status&&i.is_correct_answer?s("span",{staticStyle:{"margin-left":"10px"}},[s("i",{staticClass:"fas fa-check-circle text-success"})]):t._e()])]),t._v(" "),i.image?s("div",{staticStyle:{padding:"10px"}},[s("center",[s("img",{staticStyle:{"max-width":"150px"},attrs:{src:"/"+i.image}})])],1):t._e()])})),0):t._e(),t._v(" "),"single_line"==e.question_type?s("div",{staticClass:"row",staticStyle:{"padding-left":"20px"}},[s("div",{staticClass:"col-12"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.answer,expression:"question.answer"}],staticClass:"form-control",attrs:{type:"text",disabled:!!t.is_final_submitted,name:t.getAnswerName(n),placeholder:t.trans("exam.online_exam_answer")},domProps:{value:e.answer},on:{input:function(s){s.target.composing||t.$set(e,"answer",s.target.value)}}})])]):t._e(),t._v(" "),"multiple_line"==e.question_type?s("div",{staticClass:"row",staticStyle:{"padding-left":"20px"}},[s("div",{staticClass:"col-12"},[s("autosize-textarea",{attrs:{disabled:!!t.is_final_submitted,rows:"2",name:t.getAnswerName(n),placeholder:t.trans("exam.online_exam_answer")},model:{value:e.answer,callback:function(s){t.$set(e,"answer",s)},expression:"question.answer"}})],1)]):t._e(),t._v(" "),t.is_final_submitted?t._e():s("button",{staticClass:"btn btn-sm btn-info waves-effect waves-light pull-right",attrs:{type:"button"},on:{click:t.submit}},[t._v(t._s(t.trans("general.save")))]),t._v(" "),s("div",{staticClass:"clearfix"})])})),0),t._v(" "),t.is_final_submitted?t._e():s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 p-5"},[s("button",{staticClass:"btn btn-danger waves-effect waves-light ",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/online-exam")}}},[t._v(t._s(t.trans("general.cancel")))]),t._v(" "),s("button",{staticClass:"btn btn-success waves-effect waves-light",attrs:{type:"button"},on:{click:t.finalSubmit}},[t._v(t._s(t.trans("exam.online_exam_final_submission")))]),t._v(" "),s("div",{staticClass:"clearfix"})])])])]):s("div",{staticClass:"mx-4"},[s("button",{staticClass:"btn btn-success btn-block",attrs:{type:"button"},on:{click:t.startExam}},[t._v(t._s(t.trans("exam.online_exam_start_button")))])])]):t._e()])])])])])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=exam.js.map?id=0c425e716dde1e1fb508
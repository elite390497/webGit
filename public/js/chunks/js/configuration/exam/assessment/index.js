(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[6632],{46044:(s,e,t)=>{"use strict";t.d(e,{Z:()=>n});const a={components:{},data:function(){return{assessmentForm:new Form({name:"",description:"",details:[]})}},props:["id"],mounted:function(){helper.hasPermission("access-configuration")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.id?this.get():this.addRow()},methods:{hasPermission:function(s){return helper.hasPermission(s)},addRow:function(){this.assessmentForm.details.push({name:"",code:"",max_mark:"",pass_percentage:"",description:""})},confirmDeleteDetail:function(s){var e=this;return function(t){return e.deleteDetail(s)}},deleteDetail:function(s){this.assessmentForm.details.splice(s,1)},getDetailName:function(s){return s+"_detail_name"},getDetailCode:function(s){return s+"_detail_code"},getDetailMaxMarkName:function(s){return s+"_detail_max_mark"},getDetailPassPercentageName:function(s){return s+"_detail_pass_percentage"},getDetailDescriptionName:function(s){return s+"_detail_description"},proceed:function(){this.id?this.update():this.store()},store:function(){var s=this,e=this.$loading.show();this.assessmentForm.post("/api/exam/assessment").then((function(t){toastr.success(t.message),s.assessmentForm.details=[],s.addRow(),s.$emit("completed"),e.hide()})).catch((function(s){e.hide(),helper.showErrorMsg(s)}))},get:function(){var s=this,e=this.$loading.show();axios.get("/api/exam/assessment/"+this.id).then((function(t){s.assessmentForm.name=t.name,s.assessmentForm.description=t.description,t.details.forEach((function(e){s.assessmentForm.details.push({name:e.name,code:e.code,max_mark:e.max_mark,pass_percentage:e.pass_percentage,description:e.description})})),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t),s.$router.push("/configuration/exam/assessment")}))},update:function(){var s=this,e=this.$loading.show();this.assessmentForm.patch("/api/exam/assessment/"+this.id).then((function(t){toastr.success(t.message),e.hide(),s.$router.push("/configuration/exam/assessment")})).catch((function(s){e.hide(),helper.showErrorMsg(s)}))}}};const n=(0,t(51900).Z)(a,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("form",{on:{submit:function(e){return e.preventDefault(),s.proceed.apply(null,arguments)},keydown:function(e){return s.assessmentForm.errors.clear(e.target.name)}}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_name")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.assessmentForm.name,expression:"assessmentForm.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",placeholder:s.trans("exam.assessment_name")},domProps:{value:s.assessmentForm.name},on:{input:function(e){e.target.composing||s.$set(s.assessmentForm,"name",e.target.value)}}}),s._v(" "),t("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":"name"}})],1)]),s._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_description")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.assessmentForm.description,expression:"assessmentForm.description"}],staticClass:"form-control",attrs:{type:"text",name:"description",placeholder:s.trans("exam.assessment_description")},domProps:{value:s.assessmentForm.description},on:{input:function(e){e.target.composing||s.$set(s.assessmentForm,"description",e.target.value)}}}),s._v(" "),t("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":"description"}})],1)])]),s._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12"},[t("h6",{staticClass:"card-title"},[s._v(s._s(s.trans("exam.assessment_type")))]),s._v(" "),s._l(s.assessmentForm.details,(function(e,a){return[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_name"))+" \n                                "),t("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:s.confirmDeleteDetail(a)},expression:"{ok: confirmDeleteDetail(index)}"},{name:"tooltip",rawName:"v-tooltip",value:s.trans("general.delete"),expression:"trans('general.delete')"}],key:a+"_delete_detail",staticClass:"btn btn-xs btn-danger m-l-20",attrs:{type:"button"}},[t("i",{staticClass:"fas fa-times"})])]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"detail.name"}],staticClass:"form-control",attrs:{type:"text",name:s.getDetailName(a),placeholder:s.trans("exam.assessment_detail_name")},domProps:{value:e.name},on:{input:function(t){t.target.composing||s.$set(e,"name",t.target.value)}}}),s._v(" "),t("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailName(a)}})],1)]),s._v(" "),t("div",{staticClass:"col-12 col-sm-1"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_code")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.code,expression:"detail.code"}],staticClass:"form-control",attrs:{type:"text",name:s.getDetailCode(a),placeholder:s.trans("exam.assessment_detail_code")},domProps:{value:e.code},on:{input:function(t){t.target.composing||s.$set(e,"code",t.target.value)}}}),s._v(" "),t("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailCode(a)}})],1)]),s._v(" "),t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_max_mark")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.max_mark,expression:"detail.max_mark"}],staticClass:"form-control",attrs:{type:"number",name:s.getDetailMaxMarkName(a),placeholder:s.trans("exam.assessment_detail_max_mark")},domProps:{value:e.max_mark},on:{input:function(t){t.target.composing||s.$set(e,"max_mark",t.target.value)}}}),s._v(" "),t("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailMaxMarkName(a)}})],1)]),s._v(" "),t("div",{staticClass:"col-12 col-sm-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_pass_percentage")))]),s._v(" "),t("div",{staticClass:"input-group mb-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pass_percentage,expression:"detail.pass_percentage"}],staticClass:"form-control",attrs:{type:"number",name:s.getDetailPassPercentageName(a),placeholder:s.trans("exam.assessment_detail_pass_percentage")},domProps:{value:e.pass_percentage},on:{input:function(t){t.target.composing||s.$set(e,"pass_percentage",t.target.value)}}}),s._v(" "),s._m(0,!0)]),s._v(" "),t("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailPassPercentageName(a)}})],1)]),s._v(" "),t("div",{staticClass:"col-12 col-sm-4"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[s._v(s._s(s.trans("exam.assessment_detail_description")))]),s._v(" "),t("autosize-textarea",{attrs:{rows:"2",name:s.getDetailDescriptionName(a),placeholder:s.trans("resource.assessment_detail_description")},model:{value:e.description,callback:function(t){s.$set(e,"description",t)},expression:"detail.description"}}),s._v(" "),t("show-error",{attrs:{"form-name":s.assessmentForm,"prop-name":s.getDetailDescriptionName(a)}})],1)])])]})),s._v(" "),t("div",{staticClass:"form-group"},[t("button",{staticClass:"btn btn-info btn-sm waves-effect waves-light",attrs:{type:"button"},on:{click:s.addRow}},[s._v(s._s(s.trans("exam.add_new_assessment_detail")))])])],2)]),s._v(" "),t("div",{staticClass:"card-footer text-right"},[t("router-link",{staticClass:"btn btn-danger waves-effect waves-light ",attrs:{to:"/configuration/exam/assessment"}},[s._v(s._s(s.trans("general.cancel")))]),s._v(" "),t("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[s.id?t("span",[s._v(s._s(s.trans("general.update")))]):t("span",[s._v(s._s(s.trans("general.save")))])])],1)])])}),[function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"input-group-append"},[t("span",{staticClass:"input-group-text",attrs:{id:"basic-addon1"}},[s._v("%")])])}],!1,null,null,null).exports},95122:(s,e,t)=>{"use strict";t.r(e),t.d(e,{default:()=>o});var a=t(46044),n=t(34680),i=t.n(n);const r={components:{assessmentForm:a.Z,draggable:i()},data:function(){return{assessments:{total:0,data:[]},assessment:{},filter:{sort_by:"name",order:"asc",page_length:helper.getConfig("page_length")},orderByOptions:[{value:"name",translation:i18n.exam.assessment_name}],showReorderModal:!1,assessment_detail_list:[],help_topic:""}},mounted:function(){helper.hasPermission("access-configuration")||(helper.notAccessibleMsg(),this.$router.push("/dashboard")),this.getAssessments()},methods:{getConfig:function(s){return helper.getConfig(s)},showReorderAction:function(s){this.showReorderModal=!0,this.getAssessmentDetailList(s)},getAssessmentDetailList:function(s){var e=this;this.assessment_detail_list=[],this.assessment=s,s.details.forEach((function(s){e.assessment_detail_list.push(s.name)}))},getAssessments:function(s){var e=this,t=this.$loading.show();"number"!=typeof s&&(s=1);var a=helper.getFilterURL(this.filter);axios.get("/api/exam/assessment?page="+s+a).then((function(s){e.assessments=s,t.hide()})).catch((function(s){t.hide(),helper.showErrorMsg(s)}))},editAssessment:function(s){this.$router.push("/configuration/exam/assessment/"+s.id+"/edit")},confirmDelete:function(s){var e=this;return function(t){return e.deleteAssessment(s)}},deleteAssessment:function(s){var e=this,t=this.$loading.show();axios.delete("/api/exam/assessment/"+s.id).then((function(s){toastr.success(s.message),e.getAssessments(),t.hide()})).catch((function(s){t.hide(),helper.showErrorMsg(s)}))},print:function(){var s=this.$loading.show();axios.post("/api/exam/assessment/print",{filter:this.filter}).then((function(e){var t=window.open("/print");s.hide(),t.document.write(e)})).catch((function(e){s.hide(),helper.showErrorMsg(e)}))},pdf:function(){var s=this,e=this.$loading.show();axios.post("/api/exam/assessment/pdf",{filter:this.filter}).then((function(t){e.hide(),window.open("/download/report/"+t+"?token="+s.authToken)})).catch((function(s){e.hide(),helper.showErrorMsg(s)}))},reorderAssessment:function(){var s=this;axios.post("/api/exam/assessment/"+this.assessment.id+"/reorder",{list:this.assessment_detail_list}).then((function(e){toastr.success(e.message),s.showReorderModal=!1,s.getAssessments()})).catch((function(s){helper.showErrorMsg(s)}))}},filters:{momentDateTime:function(s){return helper.formatDateTime(s)}},watch:{"filter.sort_by":function(s){this.getAssessments()},"filter.order":function(s){this.getAssessments()},"filter.page_length":function(s){this.getAssessments()}},computed:{authToken:function(){return helper.getAuthToken()}}};const o=(0,t(51900).Z)(r,(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("div",{staticClass:"page-titles"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-sm-6"},[t("h3",{staticClass:"text-themecolor"},[s._v(s._s(s.trans("exam.assessment"))+" \n                    "),s.assessments.total?t("span",{staticClass:"card-subtitle d-none d-sm-inline"},[s._v(s._s(s.trans("general.total_result_found",{count:s.assessments.total,from:s.assessments.from,to:s.assessments.to})))]):t("span",{staticClass:"card-subtitle d-none d-sm-inline"},[s._v(s._s(s.trans("general.no_result_found")))])])]),s._v(" "),t("div",{staticClass:"col-12 col-sm-6"},[t("div",{staticClass:"action-buttons pull-right"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.trans("general.add_new"),expression:"trans('general.add_new')"}],staticClass:"btn btn-info btn-sm",on:{click:function(e){return s.$router.push("/configuration/exam/assessment/create")}}},[t("i",{staticClass:"fas fa-plus"}),s._v(" "),t("span",{staticClass:"d-none d-sm-inline"},[s._v(s._s(s.trans("exam.add_new_assessment")))])]),s._v(" "),t("sort-by",{attrs:{"order-by-options":s.orderByOptions,"sort-by":s.filter.sort_by,order:s.filter.order},on:{updateSortBy:function(e){s.filter.sort_by=e},updateOrder:function(e){s.filter.order=e}}}),s._v(" "),t("div",{staticClass:"btn-group"},[t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.trans("general.more_option"),expression:"trans('general.more_option')"}],staticClass:"btn btn-info btn-sm dropdown-toggle no-caret ",attrs:{type:"button",role:"menu",id:"moreOption","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t("i",{staticClass:"fas fa-ellipsis-h"}),s._v(" "),t("span",{staticClass:"d-none d-sm-inline"})]),s._v(" "),t("div",{class:["dropdown-menu","ltr"==s.getConfig("direction")?"dropdown-menu-right":""],attrs:{"aria-labelledby":"moreOption"}},[t("button",{staticClass:"dropdown-item custom-dropdown",on:{click:s.print}},[t("i",{staticClass:"fas fa-print"}),s._v(" "+s._s(s.trans("general.print")))]),s._v(" "),t("button",{staticClass:"dropdown-item custom-dropdown",on:{click:s.pdf}},[t("i",{staticClass:"fas fa-file-pdf"}),s._v(" "+s._s(s.trans("general.generate_pdf")))])])]),s._v(" "),t("help-button",{on:{clicked:function(e){s.help_topic="configuration.exam.assessment"}}})],1)])])]),s._v(" "),t("div",{staticClass:"container-fluid"},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body"},[s.assessments.total?t("div",{staticClass:"table-responsive"},[t("table",{staticClass:"table table-sm"},[t("thead",[t("tr",[t("th",[s._v(s._s(s.trans("exam.assessment_name")))]),s._v(" "),t("th",[s._v(s._s(s.trans("exam.assessment_type")))]),s._v(" "),t("th",[s._v(s._s(s.trans("exam.assessment_description")))]),s._v(" "),t("th",{staticClass:"table-option"},[s._v(s._s(s.trans("general.action")))])])]),s._v(" "),t("tbody",s._l(s.assessments.data,(function(e){return t("tr",[t("td",{domProps:{textContent:s._s(e.name)}}),s._v(" "),t("td",[t("ul",{staticStyle:{"list-style":"none",padding:"0",margin:"0"}},s._l(e.details,(function(e){return t("li",[s._v("\n                                            "+s._s(e.name)+" ("+s._s(s.trans("exam.assessment_detail",{max_mark:e.max_mark,pass_percentage:e.pass_percentage}))+")\n                                        ")])})),0)]),s._v(" "),t("td",{domProps:{textContent:s._s(e.description)}}),s._v(" "),t("td",{staticClass:"table-option"},[t("div",{staticClass:"btn-group"},[e.details?t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.trans("exam.reorder_assessment"),expression:"trans('exam.reorder_assessment')"}],staticClass:"btn btn-success btn-sm",on:{click:function(t){return t.preventDefault(),s.showReorderAction(e)}}},[t("i",{staticClass:"fas fa-arrows-alt"})]):s._e(),s._v(" "),t("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.trans("exam.edit_assessment"),expression:"trans('exam.edit_assessment')"}],staticClass:"btn btn-info btn-sm",on:{click:function(t){return t.preventDefault(),s.editAssessment(e)}}},[t("i",{staticClass:"fas fa-edit"})]),s._v(" "),t("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:s.confirmDelete(e)},expression:"{ok: confirmDelete(assessment)}"},{name:"tooltip",rawName:"v-tooltip",value:s.trans("exam.delete_assessment"),expression:"trans('exam.delete_assessment')"}],key:e.id,staticClass:"btn btn-danger btn-sm"},[t("i",{staticClass:"fas fa-trash"})])])])])})),0)])]):s._e(),s._v(" "),s.assessments.total?s._e():t("module-info",{attrs:{module:"exam",title:"assessment_module_title",description:"assessment_module_description",icon:"list"}},[t("div",{attrs:{slot:"btn"},slot:"btn"},[t("button",{staticClass:"btn btn-info btn-md",on:{click:function(e){return s.$router.push("/configuration/exam/assessment/create")}}},[t("i",{staticClass:"fas fa-plus"}),s._v(" "+s._s(s.trans("general.add_new")))])])]),s._v(" "),t("pagination-record",{attrs:{"page-length":s.filter.page_length,records:s.assessments},on:{"update:pageLength":function(e){return s.$set(s.filter,"page_length",e)},"update:page-length":function(e){return s.$set(s.filter,"page_length",e)},updateRecords:s.getAssessments},nativeOn:{change:function(e){return s.getAssessments.apply(null,arguments)}}})],1)])]),s._v(" "),s.showReorderModal?t("transition",{attrs:{name:"modal"}},[t("div",{staticClass:"modal-mask"},[t("div",{staticClass:"modal-wrapper"},[t("div",{staticClass:"modal-container modal-lg"},[t("div",{staticClass:"modal-header"},[s._t("header",(function(){return[s._v("\n                            "+s._s(s.trans("exam.reorder_assessment"))+"\n                            "),t("span",{staticClass:"float-right pointer",on:{click:function(e){s.showReorderModal=!1}}},[s._v("x")])]}))],2),s._v(" "),t("div",{staticClass:"modal-body"},[s._t("body",(function(){return[t("draggable",{staticClass:"list-group",on:{start:function(e){s.drag=!0},end:function(e){s.drag=!1}},model:{value:s.assessment_detail_list,callback:function(e){s.assessment_detail_list=e},expression:"assessment_detail_list"}},s._l(s.assessment_detail_list,(function(e){return t("div",{key:e.id,staticClass:"list-group-item pointer"},[t("i",{staticClass:"fas fa-arrows-alt"}),s._v(" "+s._s(e))])})),0),s._v(" "),t("button",{staticClass:"btn btn-info pull-right m-t-10",attrs:{type:"button"},on:{click:s.reorderAssessment}},[s._v(s._s(s.trans("general.save")))])]}))],2)])])])]):s._e(),s._v(" "),t("right-panel",{attrs:{topic:s.help_topic}})],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=index.js.map?id=2ac8bcd2c01eac45e69b
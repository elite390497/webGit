(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[6002],{11470:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>o});const s={components:{},props:["stockTransfer"],data:function(){return{returnForm:new Form({date:"",quantity:"",stock_item_id:"",type:"",description:""}),types:[{text:i18n.inventory.stock_transfer_return_type_returned,value:"returned"},{text:i18n.inventory.stock_transfer_return_type_consumed,value:"consumed"},{text:i18n.inventory.stock_transfer_return_type_damaged,value:"damaged"},{text:i18n.inventory.stock_transfer_return_type_missed,value:"missed"}]}},mounted:function(){},methods:{submit:function(){var t=this,e=this.$loading.show();this.returnForm.post("/api/stock/transfer/"+this.stockTransfer.id+"/return").then((function(r){toastr.success(r.message),t.$emit("completed"),e.hide()})).catch((function(t){e.hide(),helper.showErrorMsg(t)}))}},watch:{}};var n=r(51900);const a={components:{returnForm:(0,n.Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)},keydown:function(e){return t.returnForm.errors.clear(e.target.name)}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("inventory.stock_transfer_return_date")))]),t._v(" "),r("datepicker",{attrs:{bootstrapStyling:!0,placeholder:t.trans("inventory.stock_transfer_return_date")},on:{selected:function(e){return t.returnForm.errors.clear("date")}},model:{value:t.returnForm.date,callback:function(e){t.$set(t.returnForm,"date",e)},expression:"returnForm.date"}}),t._v(" "),r("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"date"}})],1)]),t._v(" "),r("div",{staticClass:"col-12 col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("inventory.stock_transfer_return_type")))]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.returnForm.type,expression:"returnForm.type"}],staticClass:"custom-select col-12",attrs:{name:"type"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.returnForm,"type",e.target.multiple?r:r[0])},function(e){return t.returnForm.errors.clear("type")}]}},[r("option",{attrs:{value:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.types,(function(e){return r("option",{domProps:{value:e.value}},[t._v("\n                            "+t._s(e.text)+"\n                          ")])}))],2),t._v(" "),r("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"type"}})],1)]),t._v(" "),r("div",{staticClass:"col-12 col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v(t._s(t.trans("inventory.stock_item")))]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.returnForm.stock_item_id,expression:"returnForm.stock_item_id"}],staticClass:"custom-select col-12",attrs:{name:"stock_item_id"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.returnForm,"stock_item_id",e.target.multiple?r:r[0])},function(e){return t.returnForm.errors.clear("stock_item_id")}]}},[r("option",{attrs:{value:""}},[t._v(t._s(t.trans("general.select_one")))]),t._v(" "),t._l(t.stockTransfer.details,(function(e){return r("option",{domProps:{value:e.stock_item_id}},[t._v("\n                            "+t._s(e.item.name)+"\n                          ")])}))],2),t._v(" "),r("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"stock_item_id"}})],1)]),t._v(" "),r("div",{staticClass:"col-12 col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("\n                            "+t._s(t.trans("inventory.stock_transfer_quantity"))+"\n                        ")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.returnForm.quantity,expression:"returnForm.quantity"}],staticClass:"form-control",attrs:{type:"text",name:"quantity",placeholder:t.trans("inventory.stock_transfer_quantity")},domProps:{value:t.returnForm.quantity},on:{input:function(e){e.target.composing||t.$set(t.returnForm,"quantity",e.target.value)}}}),t._v(" "),r("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"quantity"}})],1)]),t._v(" "),r("div",{staticClass:"col-12 col-sm-6"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:""}},[t._v("\n                            "+t._s(t.trans("inventory.stock_transfer_description"))+"\n                        ")]),t._v(" "),r("autosize-textarea",{attrs:{rows:"1",name:"description",placeholder:t.trans("inventory.stock_transfer_description")},model:{value:t.returnForm.description,callback:function(e){t.$set(t.returnForm,"description",e)},expression:"returnForm.description"}}),t._v(" "),r("show-error",{attrs:{"form-name":t.returnForm,"prop-name":"description"}})],1)])]),t._v(" "),r("div",{staticClass:"card-footer text-right"},[r("button",{staticClass:"btn btn-info waves-effect waves-light",attrs:{type:"submit"}},[t._v(t._s(t.trans("general.save")))])])]),t._v(" "),r("div",{staticClass:"clearfix"})])}),[],!1,null,null,null).exports},data:function(){return{id:this.$route.params.id,stock_transfer:{},attachments:[]}},mounted:function(){this.get()},methods:{hasPermission:function(t){return helper.hasPermission(t)},get:function(){var t=this,e=this.$loading.show();axios.get("/api/stock/transfer/"+this.id).then((function(r){t.stock_transfer=r.stock_transfer,t.attachments=r.attachments,e.hide()})).catch((function(r){e.hide(),helper.showErrorMsg(r),t.$router.push("/inventory/stock/transfer")}))},getEmployeeName:function(t){return helper.getEmployeeName(t)},getEmployeeDesignationOnDate:function(t,e){return helper.getEmployeeDesignationOnDate(t,e)},getStudentName:function(t){return helper.getStudentName(t)},formatCurrency:function(t){return helper.formatCurrency(t)},confirmDelete:function(t){var e=this;return function(r){return e.deleteReturn(t)}},deleteReturn:function(t){var e=this,r=this.$loading.show();axios.delete("/api/stock/transfer/"+this.stock_transfer.id+"/return/"+t.id).then((function(t){toastr.success(t.message),e.get(),r.hide()})).catch((function(t){r.hide(),helper.showErrorMsg(t)}))},getReturnType:function(t){return i18n.inventory["stock_transfer_return_type_"+t]},getCount:function(t,e){var r=0;return this.stock_transfer.return_details.forEach((function(s){s.stock_item_id==t.id&&s.type==e&&(r+=1)})),r}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)},momentTime:function(t){return helper.formatTime(t)}},computed:{authToken:function(){return helper.getAuthToken()}}};const o=(0,n.Z)(a,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.stock_transfer.id?r("div",[r("div",{staticClass:"page-titles"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-6"},[r("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("inventory.stock_transfer_detail"))+"\n                    "),r("span",{staticClass:"card-subtitle"},[t._v(t._s("#"+t.stock_transfer.id))])])]),t._v(" "),r("div",{staticClass:"col-12 col-sm-6"},[r("div",{staticClass:"action-buttons pull-right"},[r("router-link",{staticClass:"btn btn-info btn-sm",attrs:{to:"/inventory/stock/transfer"}},[r("i",{staticClass:"fas fa-list"}),t._v(" "),r("span",{staticClass:"d-none d-sm-inline"},[t._v(t._s(t.trans("inventory.stock_transfer")))])])],1)])])]),t._v(" "),r("div",{staticClass:"container-fluid"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-6 pr-0"},[r("div",{staticClass:"card border-right"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"table-responsive px-2"},[r("table",{staticClass:"table table-sm custom-show-table"},[r("tbody",[r("tr",[r("td",[t._v(t._s(t.trans("inventory.stock_transfer_detail")))]),t._v(" "),r("td",["employee"==t.stock_transfer.type?[t._v("\n                                                "+t._s(t.trans("employee.employee_name")+": "+t.getEmployeeName(t.stock_transfer.employee))+" "),r("br"),t._v("\n                                                "+t._s(t.getEmployeeDesignationOnDate(t.stock_transfer.employee,t.stock_transfer.date))+"\n                                            ")]:"student"==t.stock_transfer.type?[t._v("\n                                                "+t._s(t.trans("student.student_name")+": "+t.getStudentName(t.stock_transfer.student))+" "),r("br"),t._v("\n                                                "+t._s(t.trans("student.first_guardian_name")+": "+t.stock_transfer.student.parent.first_guardian_name)+" "),r("br"),t._v("\n                                                "+t._s(t.trans("student.contact_number")+": "+t.stock_transfer.student.contact_number)+" "),r("br")]:"room"==t.stock_transfer.type?[t._v("\n                                                "+t._s(t.trans("asset.room"))+": "+t._s(t.stock_transfer.room.name)+"\n                                            ")]:t._e()],2)]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.trans("inventory.stock_transfer_date")))]),t._v(" "),r("td",[t._v(t._s(t._f("moment")(t.stock_transfer.date)))])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.trans("inventory.stock_transfer_return_due_date")))]),t._v(" "),r("td",[t.stock_transfer.return_due_date?[t._v("\n                                                "+t._s(t._f("moment")(t.stock_transfer.return_due_date))+"\n                                            ")]:[t._v("-")]],2)]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.trans("general.entry_by")))]),t._v(" "),r("td",[t._v("\n                                            "+t._s(t.getEmployeeName(t.stock_transfer.user.employee))+" "),r("br"),t._v("\n                                            "+t._s(t.getEmployeeDesignationOnDate(t.stock_transfer.user.employee,t.stock_transfer.date))+"\n                                        ")])]),t._v(" "),r("tr",[r("td",[t._v(t._s(t.trans("inventory.stock_transfer_description")))]),t._v(" "),r("td",[t._v(t._s(t.stock_transfer.description))])]),t._v(" "),r("tr",[r("td",{attrs:{colspan:"2"}},[t.attachments.length?r("div",[r("ul",{staticClass:"m-t-10 upload-file-list"},t._l(t.attachments,(function(e){return r("li",{staticClass:"upload-file-list-item"},[r("a",{staticClass:"no-link-color",attrs:{href:"/stock/transfer/"+t.stock_transfer.id+"/attachment/"+e.uuid+"/download?token="+t.authToken}},[r("i",{class:["file-icon","fas","fa-lg",e.file_info.icon]}),t._v(" "),r("span",{staticClass:"upload-file-list-item-size"},[t._v(t._s(e.file_info.size))]),t._v(" "+t._s(e.user_filename))])])})),0)]):t._e()])])])])]),t._v(" "),r("h4",{staticClass:"card-title px-3"},[t._v(t._s(t.trans("inventory.stock_item")))]),t._v(" "),r("div",{staticClass:"table-responsive px-2"},[r("table",{staticClass:"table table-sm"},[r("thead",[r("tr",[r("th",{staticClass:"p-l-20"},[t._v(t._s(t.trans("inventory.stock_item")))]),t._v(" "),r("th",[t._v(t._s(t.trans("inventory.stock_transfer_quantity")))]),t._v(" "),r("th",[t._v(t._s(t.trans("inventory.stock_transfer_return_detail")))]),t._v(" "),r("th",[t._v(t._s(t.trans("inventory.stock_item_description")))])])]),t._v(" "),r("tbody",t._l(t.stock_transfer.details,(function(e){return r("tr",[r("td",{staticClass:"p-l-20"},[t._v(t._s(e.item.name))]),t._v(" "),r("td",[t._v(t._s(e.quantity))]),t._v(" "),r("td",[t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_returned"))+": "+t._s(t.getCount(e.item,"returned"))+" "),r("br"),t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_consumed"))+": "+t._s(t.getCount(e.item,"consumed"))+" "),r("br"),t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_damaged"))+": "+t._s(t.getCount(e.item,"damaged"))+" "),r("br"),t._v("\n                                            "+t._s(t.trans("inventory.stock_transfer_return_type_missed"))+": "+t._s(t.getCount(e.item,"missed"))+"\n                                        ")]),t._v(" "),r("td",[t._v(t._s(e.description))])])})),0)])])])])]),t._v(" "),r("div",{staticClass:"col-12 col-sm-6 p-0"},[r("div",{staticClass:"card card-form"},[r("div",{staticClass:"card-body"},[r("h4",{staticClass:"card-title"},[t._v(t._s(t.trans("inventory.stock_transfer_return")))]),t._v(" "),t.hasPermission("edit-stock-transfer")?r("return-form",{staticClass:"pr-3",attrs:{"stock-transfer":t.stock_transfer},on:{completed:t.get}}):t._e(),t._v(" "),r("h4",{staticClass:"card-title"},[t._v(t._s(t.trans("inventory.stock_transfer_return_detail")))]),t._v(" "),t.stock_transfer.return_details.length?r("div",{staticClass:"table-responsive"},[r("table",{staticClass:"table table-sm pr-3"},[r("thead",[r("tr",[r("th",[t._v(t._s(t.trans("inventory.stock_transfer_return_date")))]),t._v(" "),r("th",[t._v(t._s(t.trans("inventory.stock_transfer_quantity")))]),t._v(" "),r("th",[t._v(t._s(t.trans("inventory.stock_transfer_return_type")))]),t._v(" "),r("th",[t._v(t._s(t.trans("inventory.stock_transfer_description")))]),t._v(" "),t.hasPermission("edit-stock-transfer")?r("th",{staticClass:"table-option"},[t._v(t._s(t.trans("general.action")))]):t._e()])]),t._v(" "),r("tbody",t._l(t.stock_transfer.return_details,(function(e){return r("tr",[r("td",[t._v(t._s(t._f("moment")(e.date)))]),t._v(" "),r("td",[t._v(t._s(e.quantity))]),t._v(" "),r("td",[t._v("\n                                            "+t._s(t.getReturnType(e.type))+"\n                                        ")]),t._v(" "),r("td",[t._v(t._s(e.description))]),t._v(" "),t.hasPermission("edit-stock-transfer")?r("td",{staticClass:"table-option"},[r("div",{staticClass:"btn-group"},[r("button",{directives:[{name:"confirm",rawName:"v-confirm",value:{ok:t.confirmDelete(e)},expression:"{ok: confirmDelete(return_detail)}"},{name:"tooltip",rawName:"v-tooltip",value:t.trans("inventory.delete_stock_transfer_return"),expression:"trans('inventory.delete_stock_transfer_return')"}],key:e.id,staticClass:"btn btn-danger btn-sm"},[r("i",{staticClass:"fas fa-trash"})])])]):t._e()])})),0)])]):r("div",{staticClass:"px-4 pb-4"},[r("small",[t._v(t._s(t.trans("general.no_result_found")))])])],1)])])])])]):t._e()}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=show.js.map?id=c446834962e9fd3e6584
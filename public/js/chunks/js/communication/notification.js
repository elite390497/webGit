(self.webpackChunkInstiKit=self.webpackChunkInstiKit||[]).push([[6435],{40700:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});const a={components:{communicationDetail:n(626).Z},data:function(){return{communications:{total:0,data:[]},filter:{sort_by:"created_at",order:"desc",subject:"",type:"",start_date:"",end_date:"",page_length:helper.getConfig("page_length")},orderByOptions:[{value:"created_at",translation:i18n.general.created_at},{value:"subject",translation:i18n.communication.subject}],types:[],help_topic:"",communication:{},showModal:!1}},mounted:function(){this.getCommunications(),helper.showDemoNotification(["communication"])},methods:{hasPermission:function(t){return helper.hasPermission(t)},hasAnyPermission:function(t){return helper.hasAnyPermission(t)},showAction:function(t){this.communication=t,this.showModal=!0},getEmployeeName:function(t){return helper.getEmployeeName(t)},getEmployeeDesignationOnDate:function(t,e){return helper.getEmployeeDesignationOnDate(t,e)},getCommunications:function(t){var e=this,n=this.$loading.show();"number"!=typeof t&&(t=1),this.filter.start_date=helper.toDate(this.filter.start_date),this.filter.end_date=helper.toDate(this.filter.end_date);var a=helper.getFilterURL(this.filter);axios.get("/api/notification?page="+t+a).then((function(t){e.communications=t,n.hide()})).catch((function(t){n.hide(),helper.showErrorMsg(t)}))},getConfig:function(t){return helper.getConfig(t)}},filters:{moment:function(t){return helper.formatDate(t)},momentDateTime:function(t){return helper.formatDateTime(t)},momentTime:function(t){return helper.formatTime(t)}},watch:{"filter.sort_by":function(t){this.getCommunications()},"filter.order":function(t){this.getCommunications()},"filter.page_length":function(t){this.getCommunications()}},computed:{authToken:function(){return helper.getAuthToken()}}};const i=(0,n(51900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"page-titles"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-sm-6"},[n("h3",{staticClass:"text-themecolor"},[t._v(t._s(t.trans("communication.my_notification"))+" \n                    "),t.communications.total?n("span",{staticClass:"card-subtitle d-none d-sm-inline"},[t._v(t._s(t.trans("general.total_result_found",{count:t.communications.total,from:t.communications.from,to:t.communications.to})))]):n("span",{staticClass:"card-subtitle d-none d-sm-inline"},[t._v(t._s(t.trans("general.no_result_found")))])])]),t._v(" "),n("div",{staticClass:"col-12 col-sm-6"})])]),t._v(" "),n("div",{staticClass:"container-fluid"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[t.communications.total?n("div",{staticClass:"table-responsive"},[n("table",{staticClass:"table table-sm"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.trans("communication.type")))]),t._v(" "),n("th",[t._v(t._s(t.trans("communication.subject")))]),t._v(" "),n("th",[t._v(t._s(t.trans("general.created_at")))]),t._v(" "),n("th",{staticClass:"table-option"},[t._v(t._s(t.trans("general.action")))])])]),t._v(" "),n("tbody",t._l(t.communications.data,(function(e){return n("tr",[n("td",[t._v(t._s(t.trans("communication."+e.type)))]),t._v(" "),n("td",{domProps:{textContent:t._s(e.subject)}}),t._v(" "),n("td",[t._v(t._s(t._f("momentDateTime")(e.created_at)))]),t._v(" "),n("td",{staticClass:"table-option"},[n("div",{staticClass:"btn-group"},[n("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:t.trans("general.view_detail"),expression:"trans('general.view_detail')"}],staticClass:"btn btn-success btn-sm",on:{click:function(n){return n.preventDefault(),t.showAction(e)}}},[n("i",{staticClass:"fas fa-arrow-circle-right"})])])])])})),0)])]):t._e(),t._v(" "),n("pagination-record",{attrs:{"page-length":t.filter.page_length,records:t.communications},on:{"update:pageLength":function(e){return t.$set(t.filter,"page_length",e)},"update:page-length":function(e){return t.$set(t.filter,"page_length",e)},updateRecords:t.getCommunications}})],1)])]),t._v(" "),t.showModal?n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"modal-wrapper"},[n("div",{staticClass:"modal-container modal-lg"},[n("div",{staticClass:"modal-header"},[t._t("header",(function(){return[t._v("\n                            "+t._s(t.communication.subject)+"\n                            "),n("span",{staticClass:"float-right pointer",on:{click:function(e){t.showModal=!1}}},[t._v("x")])]}))],2),t._v(" "),n("div",{staticClass:"modal-body"},[t._t("body",(function(){return[n("div",{staticClass:"m-t-20",domProps:{innerHTML:t._s(t.communication.body)}}),t._v(" "),n("hr"),t._v(" "),n("p",[n("i",{staticClass:"far fa-clock"}),t._v(" "),n("small",[t._v(t._s(t.trans("general.created_at"))+" "+t._s(t._f("momentDateTime")(t.communication.created_at)))])]),t._v(" "),n("div",{staticClass:"clearfix"})]}))],2)])])])]):t._e(),t._v(" "),n("right-panel",{attrs:{topic:t.help_topic}})],1)}),[],!1,null,null,null).exports},626:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});const a=(0,n(51900).Z)({},undefined,undefined,!1,null,null,null).exports}}]);
//# sourceMappingURL=notification.js.map?id=cf124c02431c5d8afe56